<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack Basic åŸºç¡€ | N-book</title>
    <meta name="description" content="è®°å½•ä¸€äº›æŠ€æœ¯æ–¹é¢çš„æ–‡ç« ">
    <link rel="icon" href="/n-book/logo.png">
  <link rel="manifest" href="/n-book/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/n-book/assets/css/0.styles.8647af70.css" as="style"><link rel="preload" href="/n-book/assets/js/app.00669d2d.js" as="script"><link rel="preload" href="/n-book/assets/js/99.a020358d.js" as="script"><link rel="prefetch" href="/n-book/assets/js/10.66c97b87.js"><link rel="prefetch" href="/n-book/assets/js/100.25cd6efd.js"><link rel="prefetch" href="/n-book/assets/js/11.d97ba4f9.js"><link rel="prefetch" href="/n-book/assets/js/12.8a7fa5f8.js"><link rel="prefetch" href="/n-book/assets/js/13.5c6c1dfb.js"><link rel="prefetch" href="/n-book/assets/js/14.c5caa02e.js"><link rel="prefetch" href="/n-book/assets/js/15.6bba582a.js"><link rel="prefetch" href="/n-book/assets/js/16.15881af1.js"><link rel="prefetch" href="/n-book/assets/js/17.58f3bf6d.js"><link rel="prefetch" href="/n-book/assets/js/18.41a59aa0.js"><link rel="prefetch" href="/n-book/assets/js/19.372839fc.js"><link rel="prefetch" href="/n-book/assets/js/20.366470b6.js"><link rel="prefetch" href="/n-book/assets/js/21.64ee41da.js"><link rel="prefetch" href="/n-book/assets/js/22.037051e6.js"><link rel="prefetch" href="/n-book/assets/js/23.aaf071e1.js"><link rel="prefetch" href="/n-book/assets/js/24.9323b659.js"><link rel="prefetch" href="/n-book/assets/js/25.efd078a6.js"><link rel="prefetch" href="/n-book/assets/js/26.e088dd56.js"><link rel="prefetch" href="/n-book/assets/js/27.23686290.js"><link rel="prefetch" href="/n-book/assets/js/28.7561d341.js"><link rel="prefetch" href="/n-book/assets/js/29.c2bccad7.js"><link rel="prefetch" href="/n-book/assets/js/3.a2cc91fe.js"><link rel="prefetch" href="/n-book/assets/js/30.e41777e5.js"><link rel="prefetch" href="/n-book/assets/js/31.8fa8342a.js"><link rel="prefetch" href="/n-book/assets/js/32.4a720fec.js"><link rel="prefetch" href="/n-book/assets/js/33.f4bcb093.js"><link rel="prefetch" href="/n-book/assets/js/34.b319e6cc.js"><link rel="prefetch" href="/n-book/assets/js/35.349f48cb.js"><link rel="prefetch" href="/n-book/assets/js/36.40f0f5b8.js"><link rel="prefetch" href="/n-book/assets/js/37.d825f129.js"><link rel="prefetch" href="/n-book/assets/js/38.03ef6cd3.js"><link rel="prefetch" href="/n-book/assets/js/39.5616fe5e.js"><link rel="prefetch" href="/n-book/assets/js/4.5c88fff9.js"><link rel="prefetch" href="/n-book/assets/js/40.06b60369.js"><link rel="prefetch" href="/n-book/assets/js/41.c8f4431f.js"><link rel="prefetch" href="/n-book/assets/js/42.611e129f.js"><link rel="prefetch" href="/n-book/assets/js/43.090fb933.js"><link rel="prefetch" href="/n-book/assets/js/44.95113469.js"><link rel="prefetch" href="/n-book/assets/js/45.7fd92109.js"><link rel="prefetch" href="/n-book/assets/js/46.411b0cb5.js"><link rel="prefetch" href="/n-book/assets/js/47.c4ed96a6.js"><link rel="prefetch" href="/n-book/assets/js/48.363d6e9d.js"><link rel="prefetch" href="/n-book/assets/js/49.a6580a6f.js"><link rel="prefetch" href="/n-book/assets/js/5.7ed2b6ce.js"><link rel="prefetch" href="/n-book/assets/js/50.80fdc641.js"><link rel="prefetch" href="/n-book/assets/js/51.9fca5b30.js"><link rel="prefetch" href="/n-book/assets/js/52.7a12bef7.js"><link rel="prefetch" href="/n-book/assets/js/53.0a0223c1.js"><link rel="prefetch" href="/n-book/assets/js/54.f5e1f5f6.js"><link rel="prefetch" href="/n-book/assets/js/55.3942d1de.js"><link rel="prefetch" href="/n-book/assets/js/56.6edb51e4.js"><link rel="prefetch" href="/n-book/assets/js/57.ea4bffdf.js"><link rel="prefetch" href="/n-book/assets/js/58.e7e0ee95.js"><link rel="prefetch" href="/n-book/assets/js/59.4098f04a.js"><link rel="prefetch" href="/n-book/assets/js/6.b2aebbbe.js"><link rel="prefetch" href="/n-book/assets/js/60.db12ab5e.js"><link rel="prefetch" href="/n-book/assets/js/61.031fb8bd.js"><link rel="prefetch" href="/n-book/assets/js/62.329f47c4.js"><link rel="prefetch" href="/n-book/assets/js/63.b2f2abcc.js"><link rel="prefetch" href="/n-book/assets/js/64.dc588d61.js"><link rel="prefetch" href="/n-book/assets/js/65.d599496d.js"><link rel="prefetch" href="/n-book/assets/js/66.69417e8c.js"><link rel="prefetch" href="/n-book/assets/js/67.d93755f8.js"><link rel="prefetch" href="/n-book/assets/js/68.f25092ea.js"><link rel="prefetch" href="/n-book/assets/js/69.2de4fe7c.js"><link rel="prefetch" href="/n-book/assets/js/7.157f3540.js"><link rel="prefetch" href="/n-book/assets/js/70.282e9d03.js"><link rel="prefetch" href="/n-book/assets/js/71.504f689e.js"><link rel="prefetch" href="/n-book/assets/js/72.a2d94f4f.js"><link rel="prefetch" href="/n-book/assets/js/73.07c4c964.js"><link rel="prefetch" href="/n-book/assets/js/74.89c222e9.js"><link rel="prefetch" href="/n-book/assets/js/75.820bdfb7.js"><link rel="prefetch" href="/n-book/assets/js/76.2407d5c9.js"><link rel="prefetch" href="/n-book/assets/js/77.ec939a5f.js"><link rel="prefetch" href="/n-book/assets/js/78.07709c00.js"><link rel="prefetch" href="/n-book/assets/js/79.cc7a4faa.js"><link rel="prefetch" href="/n-book/assets/js/8.c2fc7b68.js"><link rel="prefetch" href="/n-book/assets/js/80.fd9ef1eb.js"><link rel="prefetch" href="/n-book/assets/js/81.df45910d.js"><link rel="prefetch" href="/n-book/assets/js/82.450bb3f2.js"><link rel="prefetch" href="/n-book/assets/js/83.32c188fc.js"><link rel="prefetch" href="/n-book/assets/js/84.294bd5d9.js"><link rel="prefetch" href="/n-book/assets/js/85.6de4096a.js"><link rel="prefetch" href="/n-book/assets/js/86.0954b5d1.js"><link rel="prefetch" href="/n-book/assets/js/87.e7762817.js"><link rel="prefetch" href="/n-book/assets/js/88.97035a60.js"><link rel="prefetch" href="/n-book/assets/js/89.53a151f5.js"><link rel="prefetch" href="/n-book/assets/js/9.e94df2f4.js"><link rel="prefetch" href="/n-book/assets/js/90.a6f97b09.js"><link rel="prefetch" href="/n-book/assets/js/91.22f24c28.js"><link rel="prefetch" href="/n-book/assets/js/92.75844e0d.js"><link rel="prefetch" href="/n-book/assets/js/93.d6922f54.js"><link rel="prefetch" href="/n-book/assets/js/94.3dd08f5f.js"><link rel="prefetch" href="/n-book/assets/js/95.6a4c80ba.js"><link rel="prefetch" href="/n-book/assets/js/96.c25099ac.js"><link rel="prefetch" href="/n-book/assets/js/97.1e5183d7.js"><link rel="prefetch" href="/n-book/assets/js/98.bbdf3f45.js"><link rel="prefetch" href="/n-book/assets/js/vendors~docsearch.8bf892cf.js">
    <link rel="stylesheet" href="/n-book/assets/css/0.styles.8647af70.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/n-book/" class="home-link router-link-active"><!----> <span class="site-name">N-book</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/n-book/" class="nav-link">Home</a></div><div class="nav-item"><a href="/n-book/typescript/" class="nav-link">TypeScript</a></div><div class="nav-item"><a href="/n-book/python/" class="nav-link">Python</a></div><div class="nav-item"><a href="https://nirodu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/NiroDu/N-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/n-book/" class="nav-link">Home</a></div><div class="nav-item"><a href="/n-book/typescript/" class="nav-link">TypeScript</a></div><div class="nav-item"><a href="/n-book/python/" class="nav-link">Python</a></div><div class="nav-item"><a href="https://nirodu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/NiroDu/N-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span></span> <!----></p> <ul class="sidebar-group-items"><li><a href="/n-book/" class="sidebar-link">ğŸ“–</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScriptsä¸“æ </span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>React ä¸“æ </span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Vue ä¸“æ </span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Webpack ä¸“æ </span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/n-book/webpack/webpack_basic.html" class="active sidebar-link">Webpack Basic åŸºç¡€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#èµ·æ‰‹å¼" class="sidebar-link">èµ·æ‰‹å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#å®‰è£…-webpack" class="sidebar-link">å®‰è£… webpack</a></li></ul></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#æ ¸å¿ƒæ¦‚å¿µ" class="sidebar-link">æ ¸å¿ƒæ¦‚å¿µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#ä»€ä¹ˆæ˜¯-loaderï¼Ÿ" class="sidebar-link">ä»€ä¹ˆæ˜¯ Loaderï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#file-loader" class="sidebar-link">file-loader</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#url-loader" class="sidebar-link">url-loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#æ‰“åŒ…-css-sass-æ·»åŠ å‰ç¼€" class="sidebar-link">æ‰“åŒ… css/sass/æ·»åŠ å‰ç¼€</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#å‡ºå…¥å£å’Œä½¿ç”¨æ’ä»¶" class="sidebar-link">å‡ºå…¥å£å’Œä½¿ç”¨æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#sourcemap" class="sidebar-link">sourceMap</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#webpackdevserver" class="sidebar-link">WebpackDevServer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#ç¬¬ä¸€ç§æ–¹å¼ï¼šwebpack-watch" class="sidebar-link">ç¬¬ä¸€ç§æ–¹å¼ï¼šwebpack --watch</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#ç¬¬äºŒç§æ–¹å¼" class="sidebar-link">ç¬¬äºŒç§æ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#ç¬¬ä¸‰ç§æ–¹å¼ï¼šwebpackdevserver" class="sidebar-link">ç¬¬ä¸‰ç§æ–¹å¼ï¼šWebpackDevServer</a></li></ul></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#hot-module-replacement" class="sidebar-link">Hot Module Replacement</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#é…ç½®-babel-è§£æ-es6" class="sidebar-link">é…ç½® babel è§£æ ES6</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#tree-shaking" class="sidebar-link">Tree Shaking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#é…ç½®-tree-shaking" class="sidebar-link">é…ç½® Tree Shaking</a></li></ul></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#webpack-merge" class="sidebar-link">webpack-merge</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#code-splitting" class="sidebar-link">Code Splitting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#åŒæ­¥å¼•å…¥" class="sidebar-link">åŒæ­¥å¼•å…¥</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#å¼‚æ­¥å¼•å…¥" class="sidebar-link">å¼‚æ­¥å¼•å…¥</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#magic-comments" class="sidebar-link">magic comments</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#splitchunksplugin" class="sidebar-link">SplitChunksPlugin</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#chunkfilename" class="sidebar-link">chunkFilename</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#css-code-splitting" class="sidebar-link">CSS Code Splitting</a></li></ul></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#lazy-loading" class="sidebar-link">Lazy Loading</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#bundle-analysis-preloading-prefetching" class="sidebar-link">Bundle Analysis,Preloading,Prefetching</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#æ‰“åŒ…åˆ†æ" class="sidebar-link">æ‰“åŒ…åˆ†æ</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#preloading-prefetching" class="sidebar-link">Preloading,Prefetching</a></li></ul></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#webpack-ä¸æµè§ˆå™¨ç¼“å­˜-caching" class="sidebar-link">Webpack ä¸æµè§ˆå™¨ç¼“å­˜(Caching)</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#shimming-çš„ä½œç”¨" class="sidebar-link">Shimming çš„ä½œç”¨</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#ç¯å¢ƒå˜é‡" class="sidebar-link">ç¯å¢ƒå˜é‡</a></li><li class="sidebar-sub-header"><a href="/n-book/webpack/webpack_basic.html#extensions-å’Œ-alias" class="sidebar-link">extensions å’Œ alias</a></li></ul></li><li><a href="/n-book/webpack/webpack_intermediate.html" class="sidebar-link">webpack intermediate è¿›é˜¶</a></li><li><a href="/n-book/webpack/webpack_advanced.html" class="sidebar-link">webpack advanced åŸç†åˆ†æ</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>TypeScript ä¸“æ </span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>è‡ªåŠ¨åŒ–æµ‹è¯•</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>æ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Interview ä¸“æ </span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>å…¶ä»–</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack-basic-åŸºç¡€"><a href="#webpack-basic-åŸºç¡€" class="header-anchor">#</a> Webpack Basic åŸºç¡€</h1> <p><a href="https://webpack.js.org/concepts" target="_blank" rel="noopener noreferrer">webpack documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="èµ·æ‰‹å¼"><a href="#èµ·æ‰‹å¼" class="header-anchor">#</a> èµ·æ‰‹å¼</h2> <p>æ¨èåœ¨é¡¹ç›®ä¸­å®‰è£… webpackï¼Œè€Œä¸æ˜¯å…¨å±€å®‰è£… webpackï¼Œè¿™æ ·æ‰å¯ä»¥åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ webpack è¿›è¡Œæ‰“åŒ…ã€‚</p> <p>npx æƒ³è¦è§£å†³çš„ä¸»è¦é—®é¢˜ï¼Œå°±æ˜¯è°ƒç”¨é¡¹ç›®å†…éƒ¨å®‰è£…çš„æ¨¡å—ã€‚åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯è¿è¡Œçš„æ—¶å€™ï¼Œä¼šåˆ°<code>node_modules/.bin</code>è·¯å¾„å’Œç¯å¢ƒå˜é‡<code>$PATH</code>é‡Œé¢ï¼Œæ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨ã€‚
<a href="http://www.ruanyifeng.com/blog/2019/02/npx.html" target="_blank" rel="noopener noreferrer">npx - é˜®ä¸€å³°<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="å®‰è£…-webpack"><a href="#å®‰è£…-webpack" class="header-anchor">#</a> å®‰è£… webpack</h3> <p>webpack-cli ä½¿å¾—å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ webpack æŒ‡ä»¤ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿è¡Œ webpackï¼Œåé¢éƒ½ç›´æ¥å†™åˆ° package.json çš„ scripts ä¸­å»ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// å°† index.js ä½œä¸º webpack çš„å…¥å£æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼š
npx webpack index.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// æŒ‡å®š webpack æ‰§è¡Œçš„é…ç½®æ–‡ä»¶
npx webpack   xxx.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸‹é¢æ¥è§£é‡Šä¸€ä¸‹æœ€åŸºç¡€çš„ webpack é…ç½®ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿˜æœ‰ production è¿™ä¸€ä¸ªé€‰é¡¹ï¼Œå‹ç¼©å’Œä¸å‹ç¼©çš„åŒºåˆ«</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// å…¥å£æ–‡ä»¶ï¼Œç®€å†™ï¼šentry: './src/index.js',</span>
  <span class="token comment">// chunkçš„é»˜è®¤å€¼æ˜¯main</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// è¾“å‡ºæ–‡ä»¶å¤¹</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// __dirname è¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> æ ¸å¿ƒæ¦‚å¿µ</h2> <h3 id="ä»€ä¹ˆæ˜¯-loaderï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-loaderï¼Ÿ" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ Loaderï¼Ÿ</h3> <p>webpack é»˜è®¤åªèƒ½å¤„ç† JS æ–‡ä»¶ï¼Œé™¤æ­¤ä»¥å¤–çš„æ–‡ä»¶éœ€è¦å¤„ç†éƒ½éœ€è¦å€ŸåŠ© Loaderã€‚</p> <h3 id="file-loader"><a href="#file-loader" class="header-anchor">#</a> file-loader</h3> <blockquote><p>The file-loader resolves import/require() on a file into a url and emits the file into the output directory.</p></blockquote> <p><a href="https://webpack.js.org/loaders/file-loader" target="_blank" rel="noopener noreferrer">file-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>file-loader ç”¨äºæ‰“åŒ…é™¤ JS ç±»å‹ä»¥å¤–çš„æ–‡ä»¶åˆ°å¯¹åº”çš„è¾“å‡ºç›®å½•ã€‚</p> <p>åƒ<code>[name]_[hash].[ext]</code>è¿™æ ·çš„å˜é‡åœ¨ webpack ä¸­ç§°ä¸º<strong>placeholders</strong>ï¼Œæœ‰ä¸åŒç±»å‹ï¼Œå¯åœ¨è¿™é‡ŒæŸ¥è¯¢ï¼š<a href="https://webpack.js.org/loaders/file-loader#placeholders" target="_blank" rel="noopener noreferrer">placeholders<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.jpg$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;[name]_[hash].[ext]&quot;</span><span class="token punctuation">,</span>
            <span class="token comment">// ä»¥outputä¸­çš„pathä¸ºåŸºç¡€è¿›è¡Œæ‰“åŒ…ï¼Œåœ¨è¿™é‡Œå³distç›®å½•ä¸‹çš„ images/</span>
            outputPath<span class="token punctuation">:</span> <span class="token string">&quot;images/&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="url-loader"><a href="#url-loader" class="header-anchor">#</a> url-loader</h3> <blockquote><p>url-loader Works like the file loader, but can return a data URL if the file is smaller than a limit.</p></blockquote> <p><a href="https://webpack.js.org/loaders/url-loader" target="_blank" rel="noopener noreferrer">url-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>url-loader å’Œ file-loader å¾ˆç±»ä¼¼ï¼Œéƒ½æ˜¯ç”¨äºå¤„ç†å„ç±»æ–‡ä»¶çš„æ‰“åŒ…çš„ã€‚ä½† url-loader æ‰“åŒ…æ˜¯å°†æ–‡ä»¶è½¬æ¢ä¸º base64 æ–‡ä»¶å†™å…¥ js ä¸­ã€‚</p> <p>ä¾‹å¦‚ç®€å•çš„å°å›¾ç‰‡é€‚åˆè½¬åŒ–ä¸º base64 å†™è¿› JS æ–‡ä»¶ä¸­ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ä¸ç”¨å†å»è¯·æ±‚å›¾ç‰‡èµ„æºï¼Œä½†æ˜¯å¤æ‚çš„å¤§å›¾ç‰‡è½¬æ¢ä¸º base64 å°±å¤ªå¤§äº†ï¼Œä¸é€‚åˆå†™è¿› JS ä¸­ï¼Œæ‰€ä»¥ä½¿ç”¨ url-loader éœ€è¦è®¾å®šä¸€ä¸ªé˜ˆå€¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡<code>limit</code>æ¥æŒ‡å®šå¤šå¤§ä»¥ä¸‹çš„æ–‡ä»¶æ‰ä¼šè¢«ä½¿ç”¨ url-loader å»æ‰“åŒ…ä¸º base64ï¼Œå¦åˆ™ä½¿ç”¨<code>fallback</code>ä¸­æŒ‡å®šçš„ loader æ¥è¿›è¡Œå¤„ç†ï¼ˆé»˜è®¤æ˜¯ file-loaderï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;[name]_[hash].[ext]&quot;</span><span class="token punctuation">,</span>
            outputPath<span class="token punctuation">:</span> <span class="token string">&quot;images/&quot;</span><span class="token punctuation">,</span>
            <span class="token comment">// 10240 byte ä¹Ÿå°±æ˜¯ 10.24kb</span>
            <span class="token comment">// æŒ‡å®šæ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰</span>
            limit<span class="token punctuation">:</span> <span class="token number">10240</span>
            <span class="token comment">// fallback: 'file-loader'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="æ‰“åŒ…-css-sass-æ·»åŠ å‰ç¼€"><a href="#æ‰“åŒ…-css-sass-æ·»åŠ å‰ç¼€" class="header-anchor">#</a> æ‰“åŒ… css/sass/æ·»åŠ å‰ç¼€</h2> <blockquote><p>webpack é…ç½®æ˜¯ä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦çš„æ‰§è¡Œé¡ºåºã€‚</p></blockquote> <p>css-loader åˆ†æ css æ–‡ä»¶ä¹‹é—´çš„å¼•ç”¨å’Œå…³ç³»ï¼Œç„¶ååˆå¹¶æˆä¸€ä»½ css ä»£ç ï¼Œstyle-loader ä¼šå†å°†è¿™æ®µ css ä»£ç æŒ‚è½½åˆ° head ä¸Šã€‚</p> <p><a href="https://webpack.js.org/loaders/css-loader" target="_blank" rel="noopener noreferrer">css-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/loaders/sass-loader" target="_blank" rel="noopener noreferrer">sass-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;[name]_[hash].[ext]&quot;</span><span class="token punctuation">,</span>
            outputPath<span class="token punctuation">:</span> <span class="token string">&quot;images/&quot;</span><span class="token punctuation">,</span>
            limit<span class="token punctuation">:</span> <span class="token number">10240</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        <span class="token comment">// use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;sass-loader&quot;, &quot;postcss-loader&quot;]</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>css-loader çš„<code>importLoaders</code>å‚æ•°ï¼ŒThe option allows you to configure how many loaders before css-loader should be applied to @imported resources.</p> <p>ä¾‹å¦‚ index.js ä¸­å¼•å…¥äº† index.scssï¼Œè€Œ index.scss ä¸­åˆå¼•å…¥äº† head.scssï¼ŒæŒ‰ç…§<code>use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;sass-loader&quot;, &quot;postcss-loader&quot;]</code>çš„æ‰§è¡Œé¡ºåºï¼Œåº”è¯¥å…ˆå»åŠ å‰ç¼€ã€ç¼–è¯‘ sassï¼Œæ‰æ˜¯å¼€å§‹æ‰§è¡Œ css-loader æ‰“åŒ… cssï¼Œå¯¹äº head.scss æ–‡ä»¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ‰€ä»¥è®¾ç½®<code>importLoaders: 2</code>çš„åŸå› æ˜¯å†æ‰§è¡Œ css-loader å‰å…ˆå»æ‰§è¡Œå®ƒä¹‹å‰ 2 ä¸ª loader ä¸€éã€‚</p> <p><a href="https://webpack.js.org/loaders/css-loader#importloaders" target="_blank" rel="noopener noreferrer">importLoaders çš„è§£é‡Š<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å¦å¤–ï¼Œä½¿ç”¨<code>postcss-loader</code>éœ€è¦åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª<code>postcss.config.js</code>ï¼ŒæŠŠé…ç½®é¡¹å†™åœ¨é‡Œé¢ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// æ·»åŠ å‰ç¼€</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;autoprefixer&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><a href="https://webpack.js.org/loaders/postcss-loader" target="_blank" rel="noopener noreferrer">postcss-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="å‡ºå…¥å£å’Œä½¿ç”¨æ’ä»¶"><a href="#å‡ºå…¥å£å’Œä½¿ç”¨æ’ä»¶" class="header-anchor">#</a> å‡ºå…¥å£å’Œä½¿ç”¨æ’ä»¶</h2> <p>æŒ‡å®šå¤šå…¥å£ï¼Œåœ¨ output é…ç½®æ—¶ä½¿ç”¨<code>filename: &quot;[name].js&quot;</code>ï¼Œå¦‚ä¸‹ä¾‹ï¼Œå°†ä¼šåœ¨ dist ç›®å½•æ‰“åŒ…æˆä¸¤ä¸ªæ–‡ä»¶ï¼š<code>main.js</code>å’Œ<code>sub.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    sub<span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">&quot;http://cdn.com.cn&quot;</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">&quot;src/index.html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>ä»‹ç»ä¸€ä¸‹å¾ˆå¸¸è§çš„<code>publicPath</code>ï¼Œè¿™ä¸ªåœ¨å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„æ—¶å€™å¾ˆå¸¸ç”¨ï¼Œè¿™ä¸ªé€‰é¡¹ä¼šåœ¨æ‰“åŒ…æ–‡ä»¶å¼•ç”¨è·¯å¾„ä¹‹å‰åŠ ä¸Šå‰ç¼€ã€‚</p> <blockquote><p>This option specifies the public URL of the output directory when referenced in a browser. A relative URL is resolved relative to the HTML page. Server-relative URLs, protocol-relative URLs or absolute URLs are also possible and sometimes required, i. e. when hosting assets on a CDN.</p></blockquote> <blockquote><p>The value of the option is prefixed to every URL created by the runtime or loaders. Because of this the value of this option ends with <code>/</code> in most cases.</p></blockquote> <p>ä½¿ç”¨äº†<code>publicPath: &quot;http://cdn.com.cn&quot;</code>æ‰“åŒ…å‡ºçš„ï¼š</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>// dist/index.js
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://cdn.com.cn/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://cdn.com.cn/sub.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ²¡ä½¿ç”¨<code>publicPath: &quot;http://cdn.com.cn&quot;</code>æ‰“åŒ…å‡ºçš„ï¼š</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>// dist/index.js
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>html æ¨¡ç‰ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sub.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="sourcemap"><a href="#sourcemap" class="header-anchor">#</a> sourceMap</h2> <p>sourceMap ç”¨äºæ˜ å°„æºæ–‡ä»¶å’Œæ‰“åŒ…åæ–‡ä»¶çš„å¯¹åº”å…³ç³»ï¼ˆè¡Œå’Œåˆ—ï¼‰ï¼Œä¾¿äºè°ƒè¯•æºä»£ç ã€‚</p> <p><a href="https://webpack.js.org/configuration/devtool/#devtool" target="_blank" rel="noopener noreferrer">devtool<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://segmentfault.com/a/1190000008315937" target="_blank" rel="noopener noreferrer">è¯¦è§£ Webpack ä¸­çš„ sourcemap<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html" target="_blank" rel="noopener noreferrer">JavaScript Source Map è¯¦è§£ - é˜®ä¸€å³°<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	<span class="token comment">// mode: 'production',</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å„ç§ sourceMap åŒºåˆ«å¤§æ¦‚æ˜¯ï¼š</p> <p>source-map ä¼šåœ¨æ‰“åŒ…åçš„ js åŒçº§ç›®å½•ç”Ÿæˆä¸€ä¸ª<code>.map</code>æ–‡ä»¶ã€‚</p> <p>inline(-source-map)ï¼šå°†<code>.map</code>ç»è¿‡ base64 ç¼–ç ä½œä¸º DataURI åµŒå…¥æ‰“åŒ…çš„ js æ–‡ä»¶ä¸­ï¼Œä¸å•ç‹¬ç”Ÿæˆ.map æ–‡ä»¶ã€‚</p> <p>cheap(-source-map)ï¼šä¸åŒ…å«åˆ—ä¿¡æ¯ï¼Œä¹Ÿä¸åŒ…å« loader çš„ sourcemap</p> <p>module(-source-map)ï¼šåŒ…å« loader(ç¬¬ä¸‰æ–¹åº“)çš„ sourcemapï¼ˆæ¯”å¦‚ babel çš„ sourcemapï¼‰</p> <p>evalï¼šä½¿ç”¨ eval å°† webpack ä¸­æ¯ä¸ªæ¨¡å—åŒ…è£¹ï¼Œç„¶ååœ¨æ¨¡å—æœ«å°¾æ·»åŠ æ¨¡å—æ¥æº//# souceURLï¼Œ ä¾é  souceURL æ‰¾åˆ°åŸå§‹ä»£ç çš„ä½ç½®ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œä½†æ˜¯æç¤ºä¸å¤Ÿå…¨ã€‚ï¼ˆeval æ¨¡å¼æœ‰ç‚¹ç‰¹æ®Šï¼Œ å®ƒå’Œå…¶ä»–æ¨¡å¼ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯å®ƒä¾é  sourceURL æ¥å®šä½åŸå§‹ä»£ç ï¼Œ è€Œå…¶ä»–æ‰€æœ‰é€‰é¡¹éƒ½ä½¿ç”¨.map æ–‡ä»¶çš„æ–¹å¼æ¥å®šä½ï¼‰</p> <p>development ç¯å¢ƒæœ€å¥½ä½¿ç”¨<code>devtool: 'cheap-module-eval-source-map'</code>ï¼Œçº¿ä¸Šè¿˜æƒ³ç”¨ sourcemap è°ƒè¯•çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨<code>devtool: 'cheap-module-source-map'</code>ã€‚</p> <h2 id="webpackdevserver"><a href="#webpackdevserver" class="header-anchor">#</a> WebpackDevServer</h2> <p>å®ç°ä»£ç è‡ªåŠ¨æ›´æ–°ã€‚</p> <h3 id="ç¬¬ä¸€ç§æ–¹å¼ï¼šwebpack-watch"><a href="#ç¬¬ä¸€ç§æ–¹å¼ï¼šwebpack-watch" class="header-anchor">#</a> ç¬¬ä¸€ç§æ–¹å¼ï¼šwebpack --watch</h3> <p>åœ¨<code>package.json</code>çš„ scripts å‘½ä»¤è¿½åŠ å‚æ•°<code>webpack --watch</code>
ä»…ä»…æ˜¯è‡ªåŠ¨æ‰“åŒ…ï¼Œä¸ä¼šå¯åŠ¨æœåŠ¡å™¨ï¼Œä¸ä¼šè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">...</span>
<span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;bundle&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;watch&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;server&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;node server.js&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ç¬¬äºŒç§æ–¹å¼"><a href="#ç¬¬äºŒç§æ–¹å¼" class="header-anchor">#</a> ç¬¬äºŒç§æ–¹å¼</h3> <p>åœ¨ node ä¸­ç›´æ¥ä½¿ç”¨ webpackï¼Œå®‰è£…<code>webpackDevMiddleware</code>å’Œ<code>express</code>ã€‚
ä¼šè‡ªåŠ¨æ›´æ–°+æ‰“åŒ…ï¼Œä½†è¿™æ ·çš„é…ç½®ä¸ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨å’Œåˆ·æ–°æµè§ˆå™¨ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-dev-middleware&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.config.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// complieræ˜¯webpackçš„ç¼–è¯‘å™¨ï¼Œå°†é…ç½®é¡¹configä¼ å…¥ï¼Œè¿”å›ä¸€ä¸ªç¼–è¯‘å¯¹è±¡ï¼Œé‡æ–°æ‰§è¡Œç¼–è¯‘</span>
<span class="token keyword">const</span> complier <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>complier<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;server is running&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="ç¬¬ä¸‰ç§æ–¹å¼ï¼šwebpackdevserver"><a href="#ç¬¬ä¸‰ç§æ–¹å¼ï¼šwebpackdevserver" class="header-anchor">#</a> ç¬¬ä¸‰ç§æ–¹å¼ï¼šWebpackDevServer</h3> <p>WebpackDevServerï¼šè‡ªåŠ¨æ‰“åŒ…+è‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨+è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚</p> <p>å®‰è£… WebpackDevServerï¼š<code>npm install webpack-dev-server -D</code></p> <p><a href="https://webpack.js.org/configuration/dev-server#devserverproxy" target="_blank" rel="noopener noreferrer">webpack-dev-server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>åœ¨<code>webpack.config.js</code>ä¸­æ·»åŠ é…ç½®é¡¹<code>devServer</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">...</span>
devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¯åŠ¨æœåŠ¡å™¨çš„å¯¹åº”ç›®å½•</span>
  contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
  <span class="token comment">// å¯åŠ¨æœåŠ¡å™¨å®Œæˆåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
  open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// ç«¯å£è®¾ç½®</span>
  port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
  <span class="token comment">// æ·»åŠ ä»£ç†</span>
  proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>WebpackDevServer æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å¹¶ä¸ä¼šæ”¾åˆ° dist ç›®å½•ä¸‹ï¼Œè€Œæ˜¯æ”¾åœ¨å†…å­˜ä¸­ï¼Œæœ‰æ•ˆçš„å¢åŠ æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥åœ¨ç›®å½•ä¸‹æ˜¯çœ‹ä¸åˆ°æ‰“åŒ…æ–‡ä»¶çš„ã€‚</p> <h2 id="hot-module-replacement"><a href="#hot-module-replacement" class="header-anchor">#</a> Hot Module Replacement</h2> <p>æ¨¡å—çƒ­æ›´æ–°ï¼Œåœ¨ä»£ç è¿›è¡Œæ›´æ–°åï¼Œåªä¼šå»ä¿®æ”¹è¢«æ›´æ–°çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ·æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p> <p>å¼€å¯ devServer çš„<code>hot</code>å’Œ<code>hotOnly</code>é€‰é¡¹ï¼Œå¹¶ä¸”åœ¨ plugins é‡Œæ·»åŠ <code>new webpack.HotModuleReplacementPlugin()</code>ã€‚</p> <p><code>hot</code>å’Œ<code>hotOnly</code>é€‰é¡¹å«ä¹‰ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>hotï¼šEnable webpack's Hot Module Replacement feature   <span class="token punctuation">[</span>boolean<span class="token punctuation">]</span>
hotOnlyï¼šDo not refresh page <span class="token keyword">if</span> HMR fails        <span class="token punctuation">[</span>boolean<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
	devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
		hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä¾‹å¦‚ï¼Œ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ./counter.js</span>
<span class="token comment">// æŒ‚è½½ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»+1ï¼Œç”¨æ¥æµ‹è¯•é¡µé¢ä¸æ˜¯é‡æ–°åˆ·æ–°ï¼Œè€Œæ˜¯çƒ­æ›´æ–°ï¼ˆçƒ­æ›´æ–°è¿™é‡Œä¸ä¼šè¢«å˜åŠ¨</span>
<span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> counter<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ./number.js</span>
<span class="token comment">// æŒ‚è½½ä¸€ä¸ªèŠ‚ç‚¹</span>
<span class="token keyword">function</span> <span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> number<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">&quot;./counter&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> number <span class="token keyword">from</span> <span class="token string">&quot;./number&quot;</span><span class="token punctuation">;</span>

<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å½“module.hotå¼€å¯æ—¶æ‰§è¡Œ</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“./number.jsæ–‡ä»¶å˜åŠ¨æ—¶ï¼Œæ‰§è¡Œä¸‹é¢å‡½æ•°çš„å†…å®¹</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&quot;./number&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç§»é™¤åŸæ¥èŠ‚ç‚¹ï¼Œé‡æ–°æ‰§è¡Œnumber()</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ä½¿ç”¨æ¡†æ¶æ—¶ï¼Œçƒ­æ›´æ–°çš„åˆ¤æ–­åœ¨ vue-loader ç­‰ loader é‡Œåšäº†ï¼Œæ‰€ä»¥å¹³æ—¶éƒ½ä¸å†™è¿™äº›ã€‚</p> <h2 id="é…ç½®-babel-è§£æ-es6"><a href="#é…ç½®-babel-è§£æ-es6" class="header-anchor">#</a> é…ç½® babel è§£æ ES6</h2> <p><a href="https://babeljs.io/setup#installation" target="_blank" rel="noopener noreferrer">babel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://babeljs.io/docs/en/usage" target="_blank" rel="noopener noreferrer">babel ç”¨æ³•<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev babel<span class="token operator">-</span>loader @babel<span class="token operator">/</span>core @babel<span class="token operator">/</span>cli @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env @babel<span class="token operator">/</span>polyfill
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>@babel/polyfill ç”¨äºå…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼ˆå¦‚ Promiseã€map ç­‰ï¼‰ï¼Œä½¿ç”¨çš„æ—¶å€™åœ¨ JS æ–‡ä»¶ä¸­ä½¿ç”¨<code>import &quot;@babel/polyfill&quot;;</code>å¼•å…¥å³å¯ï¼Œæœ¬è´¨æ˜¯åœ¨ window å¯¹è±¡ä¸‹æŒ‚è½½ï¼Œä¾‹å¦‚<code>window.Promise</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
      <span class="token string">&quot;targets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          edge<span class="token punctuation">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
          firefox<span class="token punctuation">:</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span>
          chrome<span class="token punctuation">:</span> <span class="token string">&quot;67&quot;</span><span class="token punctuation">,</span>
          safari<span class="token punctuation">:</span> <span class="token string">&quot;11.1&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;useBuiltIns&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;usage&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/preset-react&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>è¿™ä¸ªé…ç½®è¡¨ç¤ºåªå¼•å…¥ åœ¨é¡µé¢ä¸­ä½¿ç”¨åˆ°çš„éœ€è¦ polyfill çš„ä»£ç å®ç°ï¼Œä¸ä¼šå…¨éƒ¨å¼•å…¥ polyfill çš„å†…å®¹ï¼Œå†™äº†è¿™ä¸ªå°±ä¸éœ€è¦å†<code>import &quot;@babel/polyfill&quot;;</code>äº†ã€‚</p> <h2 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree Shaking</h2> <p>Tree Shaking åªæ”¯æŒ ES Module å†™æ³•çš„å¼•å…¥ï¼Œä¸æ”¯æŒå› ä¸º CommonJS å†™æ³•çš„å¼•å…¥ï¼ŒES Module åº•å±‚æ˜¯é™æ€å¼•å…¥æ–¹å¼ï¼Œè€Œ CommonJS æ˜¯åŠ¨æ€å¼•å…¥æ–¹å¼ã€‚</p> <h3 id="é…ç½®-tree-shaking"><a href="#é…ç½®-tree-shaking" class="header-anchor">#</a> é…ç½® Tree Shaking</h3> <p>å½“ mode ä¸º'development'æ—¶ï¼Œå…ˆæ˜¯åœ¨<code>webpack.config.js</code>é‡Œæ·»åŠ <code>optimization</code>çš„<code>usedExports</code>é¡¹ã€‚åœ¨ mode ä¸º'production'æ—¶ï¼Œä¸éœ€è¦æ·»åŠ è¿™ä¸€é¡¹ï¼Œwebpack é»˜è®¤å®Œæˆ Tree Shakingï¼Œåªéœ€è¦é…ç½®<code>sideEffects</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç„¶åæ˜¯åœ¨<code>package.json</code>ä¸­æ·»åŠ <code>sideEffects</code>ã€‚å› ä¸º webpack ä¼šæ ¹æ®æ¨¡å—çš„å¯¼å…¥å’Œå¯¼å‡ºæƒ…å†µè¿›è¡Œ Tree Shakingï¼Œåƒ<code>@babel/polyfill</code>è¿™æ ·çš„åªæœ‰å¯¼å…¥æ²¡æœ‰å¯¼å‡ºï¼Œæˆ–è€…æ˜¯<code>import './index.css'</code>é»˜è®¤æƒ…å†µä¸‹ä¼šè¢« Shaking æ‰ï¼Œæ‰€ä»¥åœ¨<code>sideEffects</code>é‡ŒåŠ å…¥å®ƒï¼Œåˆ™åœ¨ Tree Shaking æ—¶ä¼šå¿½ç•¥æ‰å®ƒã€‚å‡å¦‚æ²¡æœ‰è¿™æ ·çš„æ¨¡å—ï¼Œç›´æ¥è®¾ç½®<code>sideEffects</code>ä¸º falseã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;du&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;sideEffects&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;*.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// &quot;sideEffects&quot;: false,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="webpack-merge"><a href="#webpack-merge" class="header-anchor">#</a> webpack-merge</h2> <p>åŒºåˆ†ç¯å¢ƒï¼Œåˆå¹¶é‡å¤ä»£ç ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i webpack-merge -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç›®å‰å®Œæ•´çš„ webpack é…ç½®æ–‡ä»¶ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        <span class="token comment">// åªæœ‰è¿™ä¸ªç›®å½•ä¸‹çš„æ‰ä¼šä½¿ç”¨babel-loader</span>
        <span class="token comment">// include: path.resolve(_dirname,'../src'),</span>
        loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;[name]_[hash].[ext]&quot;</span><span class="token punctuation">,</span>
            outputPath<span class="token punctuation">:</span> <span class="token string">&quot;images/&quot;</span><span class="token punctuation">,</span>
            limit<span class="token punctuation">:</span> <span class="token number">10240</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(eot|ttf|svg)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;file-loader&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">&quot;src/index.html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><p>å¼€å‘ç¯å¢ƒ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.common.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">&quot;cheap-module-eval-source-map&quot;</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ç”Ÿäº§ç¯å¢ƒ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.common.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">&quot;cheap-module-source-map&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;du&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;sideEffects&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;dev&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server --config ./build/webpack.dev.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --config ./build/webpack.prod.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="code-splitting"><a href="#code-splitting" class="header-anchor">#</a> Code Splitting</h2> <p>ä»£ç åˆ†å‰²ï¼ŒåŒæ­¥å’Œå¼‚æ­¥å¼•å…¥æœ‰ä¸¤ç§æ–¹å¼å®ç°ã€‚</p> <p><a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">Code Splitting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="åŒæ­¥å¼•å…¥"><a href="#åŒæ­¥å¼•å…¥" class="header-anchor">#</a> åŒæ­¥å¼•å…¥</h3> <p>åŒæ­¥ä»£ç ï¼š åªéœ€è¦åœ¨ webpack.common.js ä¸­åš optimization çš„é…ç½®å³å¯ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// åŒæ­¥å¼•å…¥lodash</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// é…ç½®webpack configæ–‡ä»¶</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
		<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>åœ¨æ‰“åŒ…åå°±ä¼šå•ç‹¬å°† lodash è¿™ç§ç¬¬ä¸‰æ–¹åº“ï¼Œä¸ä¸šåŠ¡ä»£ç åˆ†å¼€å•ç‹¬ç”Ÿæˆä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p> <h3 id="å¼‚æ­¥å¼•å…¥"><a href="#å¼‚æ­¥å¼•å…¥" class="header-anchor">#</a> å¼‚æ­¥å¼•å…¥</h3> <p>å¼‚æ­¥ä»£ç (import): å¼‚æ­¥ä»£ç ï¼Œæ— éœ€åšä»»ä½•é…ç½®ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼Œæ”¾ç½®åˆ°æ–°çš„æ–‡ä»¶ä¸­ã€‚</p> <p><a href="https://webpack.js.org/guides/code-splitting#dynamic-imports" target="_blank" rel="noopener noreferrer">åŠ¨æ€å¯¼å…¥ Dynamic Imports<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// import() calls use promises internally.</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä½¿ç”¨å®éªŒæ€§çš„åŠ¨æ€ import è¯­æ³•ï¼Œéœ€è¦å®‰è£…<code>babel-plugin-syntax-dynamic-import</code>ã€‚</p> <p><a href="https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import" target="_blank" rel="noopener noreferrer">babel-plugin-syntax-dynamic-import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
	presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>
			<span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				targets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					chrome<span class="token punctuation">:</span> <span class="token string">&quot;67&quot;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				useBuiltIns<span class="token punctuation">:</span> <span class="token string">'usage'</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;@babel/preset-react&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// æ·»åŠ è¿™ä¸€è¡Œ</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="magic-comments"><a href="#magic-comments" class="header-anchor">#</a> magic comments</h3> <p><a href="https://webpack.js.org/api/module-methods/#magic-comments" target="_blank" rel="noopener noreferrer">magic-comments<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å‡å¦‚æƒ³ä¸ºåŠ¨æ€å¼•å…¥çš„åŒ…æŒ‡å®šæ‰“åŒ…åçš„åå­—ï¼Œå¯ä»¥ä½¿ç”¨ magic comments + splitChunks é…ç½®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;lodash&quot; */</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="splitchunksplugin"><a href="#splitchunksplugin" class="header-anchor">#</a> SplitChunksPlugin</h3> <p><a href="https://webpack.js.org/plugins/split-chunks-plugin" target="_blank" rel="noopener noreferrer">SplitChunksPlugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä¸‹é¢è¯¦ç»†è®²è§£ä¸€ä¸‹<code>splitChunks</code>çš„é…ç½®ã€‚</p> <p>splitChunks çš„é»˜è®¤é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// chunksæŒ‡å®šå“ªç§ç±»å‹çš„å¼•å…¥ä¼šè¢«åˆ†å‰²ï¼Œå€¼æœ‰all, async, initialï¼Œé»˜è®¤å€¼async</span>
      chunks<span class="token punctuation">:</span> <span class="token string">&quot;async&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å°äº30kbçš„å°±ä¸è¿›è¡Œä»£ç åˆ†å‰²äº†</span>
      minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      <span class="token comment">// maxSize è®¾ç½®æˆ50000çš„è¯ï¼Œä¼šå°è¯•å°†ä¸€ä¸ª100000çš„åº“æ‹†åˆ†ä¸ºä¸¤ä¸ªvendorsã€‚è®¾ç½®ä¸º0åˆ™ä¸æ‹†åˆ†ã€‚</span>
      maxSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token comment">// æ‰“åŒ…å‡ºæ¥çš„Chunké‡Œæœ€å°‘1ä¸ªChunkä½¿ç”¨åˆ°äº†è¿™ä¸ªæ¨¡å—ï¼ˆä¸€ä¸ªæ¨¡å—è‡³å°‘è¢«ç”¨äº†å¤šå°‘æ¬¡çš„æ—¶å€™æ‰ä¼šå¯¹å®ƒè¿›è¡Œåˆ†å‰²ï¼‰</span>
      minChunks<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token comment">// åŒæ—¶åŠ è½½çš„æ¨¡å—æ•°æœ€å¤šæ˜¯5ä¸ªï¼Œå‡å¦‚åŠ è½½çš„æ•°ç›®è¶…è¿‡äº†5ä¸ªï¼Œåé¢çš„æ¨¡å—å°±ä¸ä¼šè¿›è¡Œä»£ç åˆ†å‰²äº†</span>
      maxAsyncRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token comment">// å…¥å£æ–‡ä»¶ åŒæ—¶åŠ è½½çš„æ¨¡å—æ•°æœ€å¤šæ˜¯3ä¸ªï¼Œè¶…è¿‡3ä¸ªå°±ä¸ä¼šè¿›è¡Œä»£ç åˆ†å‰²äº†</span>
      maxInitialRequests<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token comment">// æ–‡ä»¶è¿æ¥ç¬¦ï¼Œè¿æ¥vendorså’Œæ–‡ä»¶å</span>
      automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">&quot;~&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// è®©filenameç”Ÿæ•ˆ</span>
      name<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨node_modulesæ–‡ä»¶å¤¹é‡Œçš„é‚£äº›åº“æ‰ä¼šè¢«åˆ†å‰²æˆvendors</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          <span class="token comment">// -10ä¼˜å…ˆçº§å¤§äº-20ï¼Œç¬¦åˆæ¡ä»¶çš„ä¼šè¢«ä¼˜å…ˆæ‰“åŒ…åˆ°vendors.js</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
          filename<span class="token punctuation">:</span> <span class="token string">&quot;vendors.js&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// ä¸ç”¨vendorsçš„è¯</span>
        <span class="token comment">// vendors: false,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token comment">// å¦‚æœä¸€ä¸ªæ¨¡å—ä¹‹å‰å°±è¢«æ‰“åŒ…è¿›å»äº†ï¼Œé‚£å°±å»å¤ç”¨é‚£ä¸ªæ¨¡å—</span>
          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token comment">// filename: 'common.js',</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ä¸Šé¢ç­‰ä»·äº</span>
  <span class="token comment">// optimization: {}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>ä»£ç ä¸­çš„åŒæ­¥å¼•å…¥çš„ä»£ç éœ€è¦ç»“åˆ<code>chunks</code>å’Œ<code>cacheGroups</code>ä¸­çš„<code>vendors</code>ä¸€å—ä½¿ç”¨ï¼Œå¦‚ä¸Šé…ç½®ï¼Œå½“åŒæ­¥å¼•å…¥çš„ä»£ç åº“æ˜¯åœ¨<code>node_modules</code>ä¸­ï¼Œæ‰ä¼šå¯¹åº“è¿›è¡Œä»£ç åˆ†å‰²ã€‚</p> <p>å‡å¦‚åŒæ—¶å¼•å…¥äº† lodash å’Œ jquery ä¸¤ä¸ªåº“ï¼Œä¸¤ä¸ªæ–‡ä»¶éƒ½ç¬¦åˆ<code>chunks``minSize``minChunks</code>çš„è¦æ±‚ï¼ŒåˆåŒ¹é…äº†<code>vendors</code>çš„æ­£åˆ™ï¼Œï¼ˆ<code>default</code>æ²¡æœ‰æ­£åˆ™ï¼Œé»˜è®¤æ‰€æœ‰éƒ½åŒ¹é…ï¼‰ã€‚é‚£åœ¨ä»£ç åˆ†å‰²æ—¶ï¼Œæ–‡ä»¶ä¼šå…ˆåœ¨ç¼“å­˜ä¸­å­˜å‚¨ï¼Œå†æ ¹æ®<code>cacheGroups</code>çš„<code>priority</code>ä¼˜å…ˆçº§ï¼Œç¡®å®šæ‰§è¡Œ<code>vendors</code>è¿˜æ˜¯<code>default</code>çš„åˆ†å‰²ã€‚</p> <h3 id="chunkfilename"><a href="#chunkfilename" class="header-anchor">#</a> chunkFilename</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
		chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].chunk.js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä»<code>entry</code>ä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–æ˜¯è¢«é¡µé¢ç›´æ¥å¼•ç”¨åˆ°çš„æ–‡ä»¶ä¼šä½¿ç”¨<code>filename</code>ï¼Œè€Œ<code>chunkFilename</code>å¦‚å…¶åï¼Œä¾‹å¦‚åœ¨<code>index.js</code>ä¸­å¼•ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ˆé—´æ¥å¼•ç”¨ï¼‰ï¼Œç„¶ååˆé…ç½®äº†ä»£ç åˆ†å‰²æˆä¸ºä¸€ä¸ªä¸ª chunk çš„è¯ï¼Œå°±ä¼šä½¿ç”¨<code>chunkFilename</code>æŒ‡å®šçš„åå­—ã€‚</p> <h3 id="css-code-splitting"><a href="#css-code-splitting" class="header-anchor">#</a> CSS Code Splitting</h3> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpack ä¼šè®² css ç›´æ¥æ‰“åŒ…è¿› js ä¸­ï¼ˆcss-in-jsï¼‰ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³è¦å°† css å•ç‹¬æ‹å‡ºæ¥ï¼Œéœ€è¦å€ŸåŠ©<a href="https://webpack.js.org/plugins/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å®ç° css çš„ä»£ç åˆ†å‰²ã€‚</p> <p>å®‰è£…</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev mini-css-extract-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¼•å…¥ pluginsï¼Œå¹¶ä¸”å°†åŸæ¥çš„<code>style-loader</code>æ›¿æ¢æˆ<code>MiniCssExtractPlugin.loader</code>ï¼Œå¹¶ä¸”å¯ä»¥é…ç½® HRMã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
      <span class="token comment">// both options are optional</span>
      filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
      chunkFilename<span class="token punctuation">:</span> <span class="token string">&quot;[id].css&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// ä¸èƒ½å†ç”¨style-loaderæ‰“åŒ…äº†</span>
          <span class="token comment">// 'style-loader',</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// you can specify a publicPath here</span>
              <span class="token comment">// by default it uses publicPath in webpackOptions.output</span>
              publicPath<span class="token punctuation">:</span> <span class="token string">&quot;../&quot;</span><span class="token punctuation">,</span>
              <span class="token comment">// only enable hot in development</span>
              hmr<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
              <span class="token comment">// if hmr does not work, this is a forceful method.</span>
              reloadAll<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sass-loader&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>å‡å¦‚æ‰“ç®— Minimizingï¼Œå¯ä»¥ä½¿ç”¨<a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin" target="_blank" rel="noopener noreferrer">optimize-css-assets-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å¯¹ CSS å‹ç¼©ï¼Œå¯¹ JS å‹ç¼©çš„è¯ä½¿ç”¨<a href="https://github.com/webpack-contrib/terser-webpack-plugin" target="_blank" rel="noopener noreferrer">terser-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> TerserJSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å°†å¤šå…¥å£çš„å¤šä¸ª CSS æ–‡ä»¶éƒ½é›†ä¸­æ‰“åŒ…åˆ°ä¸€ä¸ª CSS ä¸­ï¼Œå¹¶è‡ªå®šä¹‰åå­—ï¼šï¼š<a href="https://webpack.js.org/plugins/mini-css-extract-plugin#extracting-all-css-in-a-single-file" target="_blank" rel="noopener noreferrer">Extracting all CSS in a single file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å°†å¤šå…¥å£çš„å¤šä¸ª CSS æ–‡ä»¶åˆ†åˆ«æ‰“åŒ…åˆ°å¯¹åº”çš„ CSS æ–‡ä»¶ä¸­ï¼Œå¹¶è‡ªå®šä¹‰åå­—ï¼š<a href="https://webpack.js.org/plugins/mini-css-extract-plugin#extracting-css-based-on-entry" target="_blank" rel="noopener noreferrer">Extracting CSS based on entry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>æŒ‰ç€é…ç½®æ¥å³å¯ã€‚</p> <h2 id="lazy-loading"><a href="#lazy-loading" class="header-anchor">#</a> Lazy Loading</h2> <p>æ‰‹åŠ¨å®ç°ï¼Œç‚¹å‡»é¡µé¢åå†åŠ è½½æ–‡ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;lodash&quot; */</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="bundle-analysis-preloading-prefetching"><a href="#bundle-analysis-preloading-prefetching" class="header-anchor">#</a> Bundle Analysis,Preloading,Prefetching</h2> <h3 id="æ‰“åŒ…åˆ†æ"><a href="#æ‰“åŒ…åˆ†æ" class="header-anchor">#</a> æ‰“åŒ…åˆ†æ</h3> <p><a href="https://webpack.js.org/guides/code-splitting#bundle-analysis" target="_blank" rel="noopener noreferrer">bundle-analysis<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>You can generate the required JSON file for this tool by running <code>webpack --profile --json &gt; stats.json</code></p></blockquote> <p>åœ¨<code>package.json</code>ä¸­æ·»åŠ é…ç½®å³å¯ï¼Œæ‰§è¡Œåä¼šç”Ÿæˆä¸€ä¸ª<code>.json</code>æ ¼å¼çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è®°è½½ç€ webpack çš„æ‰“åŒ…ä¿¡æ¯ã€‚å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¯¼å…¥ä¸‹é¢è¿™äº›ç½‘ç«™è¿›è¡Œå¯è§†åŒ–åˆ†æï¼š</p> <ul><li><a href="https://github.com/webpack/analyse" target="_blank" rel="noopener noreferrer">webpack analyse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://alexkuz.github.io/webpack-chart/" target="_blank" rel="noopener noreferrer">webpack-chart<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://chrisbateman.github.io/webpack-visualizer/" target="_blank" rel="noopener noreferrer">webpack-visualizer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>æˆ–è€…æ˜¯ç›´æ¥å®‰è£…<a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>æ’ä»¶è¿›è¡Œåˆ†æã€‚</p> <h3 id="preloading-prefetching"><a href="#preloading-prefetching" class="header-anchor">#</a> Preloading,Prefetching</h3> <p><a href="https://webpack.js.org/guides/code-splitting#prefetchingpreloading-modules" target="_blank" rel="noopener noreferrer">prefetching/preloading-modules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>æŸ¥çœ‹ä»£ç åˆ©ç”¨ç‡ï¼šåœ¨ chrome ä¸­ï¼ŒæŒ‰ä½<code>command+shift+p</code>å”¤å‡ºæ§åˆ¶å°ï¼Œç„¶åè¾“å…¥<code>coverage</code>ï¼Œç‚¹å‡»å½•åˆ¶å¯ä»¥çœ‹åˆ°ä»£ç çš„åˆ©ç”¨ç‡ã€‚</strong></p> <p>ä½¿ç”¨ magic comments <code>/* webpackPrefetch: true */</code>ï¼Œæ‰§è¡Œé¢„åŠ è½½ï¼ˆæµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¸åŒï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ./fn.js</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> fn<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">&quot;./fn.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> fn <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="webpack-ä¸æµè§ˆå™¨ç¼“å­˜-caching"><a href="#webpack-ä¸æµè§ˆå™¨ç¼“å­˜-caching" class="header-anchor">#</a> Webpack ä¸æµè§ˆå™¨ç¼“å­˜(Caching)</h2> <p><a href="https://webpack.js.org/guides/caching/#root" target="_blank" rel="noopener noreferrer">caching<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ç¼“å­˜å°±ä¸ç”¨å¤šè¯´äº†ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·åœ¨å†æ¬¡è®¿é—®æˆ‘ä»¬çš„ç½‘å€æ—¶ï¼Œåªé‡æ–°åŠ è½½æˆ‘ä»¬æ›´å˜è¿‡å†…å®¹çš„ JS æ–‡ä»¶ï¼Œå…¶ä½™çš„ä¾ç„¶èµ°ç¼“å­˜æ–‡ä»¶ã€‚</p> <p>é‚£å…³é”®åœ¨äºè®¾ç½®æ–‡ä»¶çš„<code>[contenthash]</code>ï¼Œå½“å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ–‡ä»¶åä¹Ÿä¼šå˜åŒ–ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// filename: 'bundle.js',</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].[contenthash].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä½†æ˜¯è¿™æ ·æ‰“åŒ…ä¼šå‘ç°æ–‡ä»¶å†…å®¹å°±ç®—æ²¡å˜ï¼Œæ–‡ä»¶åçš„ hash å€¼ä¹Ÿæ”¹å˜äº†ï¼Œå®˜ç½‘æœ‰è§£é‡Šï¼š<strong>This is because webpack includes certain boilerplate, specifically the runtime and manifest, in the entry chunk.</strong></p> <p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š</p> <blockquote><p>webpack provides an optimization feature to split runtime code into a separate chunk using the <code>optimization.runtimeChunk</code> option. Set it to single to create a single runtime bundle for all chunks:</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].[contenthash].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token punctuation">:</span> <span class="token string">'single'</span><span class="token punctuation">,</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendor<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¿™æ ·å­æ‰“åŒ…å‡ºæ¥çš„æ—¶å€™ï¼Œå¤šäº†ä¸€ä¸ª<code>runtime.[contenthash].js</code>çš„æ–‡ä»¶ï¼Œå¹¶ä¸”è¿˜æŠŠç¬¬ä¸‰æ–¹æ¨¡å—æ–‡ä»¶å•ç‹¬æŠ½ç¦»æˆä¸€ä¸ª<code>vendors.[contenthash].js</code>ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   <span class="token number">1.42</span> KiB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
vendors.a42c3ca0d742766d7a28.js   <span class="token number">69.4</span> KiB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
   main.abf44fedb7d11d4312d7.js  <span class="token number">240</span> bytes       <span class="token number">2</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  <span class="token number">353</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨webpack4çš„æ–°ç‰ˆæœ¬ä¸­ï¼Œä¸éœ€è¦å£°æ˜<code>runtimeChunk</code>ä¹Ÿå¯ä»¥ï¼Œä½†ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬ï¼Œæœ€å¥½éƒ½åŠ ä¸Šã€‚</p> <p>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå½“<code>index.js</code>ä¸­æ–°importè¿›å…¶ä»–æ–‡ä»¶ï¼Œæ‰“åŒ…åçš„<code>vendors.[contenthash].js</code>æ–‡ä»¶å“ªæ€•æ²¡æœ‰æ›´å˜å†…å®¹ï¼Œhashå€¼ä¼šè¢«æ”¹å˜ï¼ŒåŸå› æ˜¯å› ä¸º
<a href="https://webpack.js.org/guides/caching/#module-identifiers" target="_blank" rel="noopener noreferrer">Module Identifiers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <p>è§£å†³åŠæ³•ï¼šå®‰è£…<a href="https://webpack.js.org/plugins/hashed-module-ids-plugin" target="_blank" rel="noopener noreferrer">HashedModuleIdsPlugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å³å¯ã€‚</p> <h2 id="shimming-çš„ä½œç”¨"><a href="#shimming-çš„ä½œç”¨" class="header-anchor">#</a> Shimming çš„ä½œç”¨</h2> <p>shim å«ç‰‡ã€‚</p> <p>å‡å¦‚æˆ‘ä»¬è‡ªå·±å†™äº†ä¸€ä¸ªæ¨¡å—å«<code>ui</code>ï¼Œç„¶åè¿™ä¸ªæ¨¡å—é‡Œä½¿ç”¨äº†<code>jquery</code>å’Œ<code>lodash</code>ï¼Œä½†æ˜¯å´æ²¡æœ‰åœ¨æ–‡ä»¶é‡Œå¼•å…¥ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ui.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span><span class="token function">_jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span>_<span class="token punctuation">.</span><span class="token function">jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è€Œæ˜¯æƒ³åƒè¿™æ ·è°ƒç”¨ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>ui<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ui.js'</span>
<span class="token function">ui</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¾ˆæ˜æ˜¾<code>ui()</code>æ˜¯ä¸èƒ½æ‰§è¡Œçš„ï¼Œå› ä¸ºwebpackæ‰“åŒ…åçš„æ¯ä¸€ä¸ªæ¨¡å—éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹ï¼Œè§£è€¦çš„ã€‚</p> <p>ç¡¬è¦è¿™ä¹ˆåšçš„è¯ï¼Œå¯ä»¥å€ŸåŠ©webpackè‡ªèº«æä¾›çš„<code>webpack.ProvidePlugin</code>ï¼Œæ¥å£°æ˜shimã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			$<span class="token punctuation">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span>
			_<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>
			_join<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">,</span> <span class="token string">'join'</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿™æ ·å£°æ˜åï¼Œå½“å…¶ä»–æ¨¡å—ä¸­é‡ä¸Š<code>$</code>å’Œ<code>_</code>ï¼Œä¼šè‡ªåŠ¨åœ¨æ–‡ä»¶ä¸Šæ–¹åˆ†åˆ«å¼•ç”¨<code>jqueryæ¨¡å—</code>å’Œ<code>lodashæ¨¡å—</code>ã€‚</p> <p><code>['lodash', 'join']</code>çš„å†™æ³•æ˜¯å¼•å…¥<code>lodashæ¨¡å—</code>ä¸­çš„<code>join</code>ï¼Œç»™<code>_join</code>å…³é”®å­—ç”¨ã€‚å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ui.js</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> _jion <span class="token keyword">from</span> <span class="token string">'lodash/jion'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span><span class="token function">_jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span>_<span class="token punctuation">.</span><span class="token function">jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="header-anchor">#</a> ç¯å¢ƒå˜é‡</h2> <p>ä¾‹å¦‚æˆ‘ä»¬æƒ³ä¼ ä¸€ä¸ªå…¨å±€å˜é‡<code>env.production</code>è¿›å»ï¼Œå¯ä»¥é€šè¿‡åœ¨<code>package.json</code>çš„<code>scripts</code>ä¸­ä¼ å…¥è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ï¼š<code>--env.production</code>ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token comment">// ä¸æ¨èè¿™æ ·åŒºåˆ†ç¯å¢ƒæ‰“åŒ…é…ç½®</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;dev&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server --config ./build/webpack.common.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --env.production --config ./build/webpack.common.js&quot;</span>
    <span class="token string">&quot;build2&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --env=production --config ./build/webpack.common.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>é‚£åœ¨webpacké…ç½®æ–‡ä»¶é‚£è¾¹å°±å¯ä»¥æ¥æ”¶åˆ°ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸æ¨èè¿™æ ·åŒºåˆ†ç¯å¢ƒæ‰“åŒ…é…ç½®</span>
  <span class="token comment">// build1çš„æƒ…å†µ</span>
	<span class="token comment">// if(env &amp;&amp; env.production) {</span>
  <span class="token comment">// build2çš„æƒ…å†µ</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>env <span class="token operator">&amp;&amp;</span> env<span class="token operator">===</span><span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="extensions-å’Œ-alias"><a href="#extensions-å’Œ-alias" class="header-anchor">#</a> extensions å’Œ alias</h2> <p>è¿™ä¸¤ä¸ªä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é…ç½®é¡¹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
	resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.jsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¯¹åº”è·¯å¾„</span>
			child<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/a/b/c/child'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>extensions</code>é…ç½®åå¯ä»¥çœç•¥å¯¼å…¥æ–‡ä»¶çš„åç¼€ï¼Œæ¥æ”¶ä¸€ä¸ªæ•°ç»„ã€‚
ä¾‹å¦‚<code>import A from './a'</code>ï¼Œ
webpackä¼šæŒ‰ç€æ•°ç»„å†…å®¹çš„é¡ºåºï¼Œä¸€ä¸ªä¸ªåŒ¹é…ï¼Œå…ˆæ˜¯<code>./a.js</code>ï¼Œå‡å¦‚æ²¡åŒ¹é…ä¸Šï¼Œåˆ™ç»§ç»­åŒ¹é…<code>./a.jsx</code>ã€‚</p> <p>é…ç½®åˆ«å<code>alias</code>åï¼Œå¯ä»¥ç›´æ¥è¿™æ ·å¯¼å…¥<code>Child</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'child'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>This is App<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/NiroDu/N-book/edit/master/docs/webpack/webpack_basic.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘æ­¤é¡µ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°: </span> <span class="time">5/27/2019, 7:15:55 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/n-book/vue/IIS.html" class="prev">
          Vue HTML5 History æ¨¡å¼ (IIS)é…ç½®æ–‡ä»¶
        </a></span> <span class="next"><a href="/n-book/webpack/webpack_intermediate.html">
          webpack intermediate è¿›é˜¶
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/n-book/assets/js/app.00669d2d.js" defer></script><script src="/n-book/assets/js/99.a020358d.js" defer></script>
  </body>
</html>
