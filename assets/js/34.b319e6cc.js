(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{373:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("p",[t._v("在这里简单的说一说 IIFE (Immediately Invoked Function Expressions)，立即调用函数表达式。\n立即调用函数表达式，也称自执行函数。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("先看下面一个例子：")]),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Glossary/IIFE",target:"_blank",rel:"noopener noreferrer"}},[t._v("IIFE - MDN Web Docs Glossary: Definitions of Web-related terms | MDN"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"http://lucybain.com/blog/2014/immediately-invoked-function-expression/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lucy | JS Immediately Invoked Function Expressions"),n("OutboundLink")],1)])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"iife-自执行函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iife-自执行函数"}},[this._v("#")]),this._v(" IIFE (自执行函数)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[this._v("#")]),this._v(" 定义")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("An IIFE (Immediately Invoked Function Expression) is a JavaScript function that runs as soon as it is defined.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("It is a design pattern which is also known as a Self-Executing Anonymous Function and contains two major parts. The first is the anonymous function with lexical scope enclosed within the Grouping Operator (). This prevents accessing variables within the IIFE idiom as well as polluting the global scope.\nThe second part creates the immediately executing function expression () through which the JavaScript engine will directly interpret the function.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"iife-参数问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iife-参数问题"}},[this._v("#")]),this._v(" IIFE 参数问题")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" jQuery "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jquery'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("global"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jQuery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("这个例子引发了我的一点疑问：1、为什么要把"),n("code",[t._v("window")]),t._v("和"),n("code",[t._v("jQuery")]),t._v("分别作为对象"),n("code",[t._v("global")]),t._v("和"),n("code",[t._v("$")]),t._v("传入到自执行函数里呢，作用是什么？")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("查了查资料，解了疑惑。\n把"),n("code",[t._v("window")]),t._v("作为对象"),n("code",[t._v("global")]),t._v("传入的目的是将本是全局对象的"),n("code",[t._v("window")]),t._v("，注入IIFE中，便成了IIFE的局部变量"),n("code",[t._v("global")]),t._v("。\n在有需要调用"),n("code",[t._v("window")]),t._v("对象的属性时，直接从局部变量"),n("code",[t._v("global")]),t._v("调用，不需要沿着scope chain（作用域链）一级级返回到顶层作用域"),n("code",[t._v("window")]),t._v("去，这样可以更快的访问"),n("code",[t._v("window")]),t._v("。\n而将"),n("code",[t._v("jQuery")]),t._v("作为对象"),n("code",[t._v("$")]),t._v("传入，则是可以保证在这个IIFE内"),n("code",[t._v("$")]),t._v("就是"),n("code",[t._v("jquery")]),t._v("而不是其他类似使用"),n("code",[t._v("$")]),t._v("符号的库，避免冲突。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"正确的iife写法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#正确的iife写法"}},[this._v("#")]),this._v(" 正确的IIFE写法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("再看一个例子：\n请解释下面代码为什么不能用作 IIFE："),s("code",[this._v("function foo(){ }();")]),this._v(" ，需要作出哪些修改才能使其成为 IIFE？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("JavaScript 解析器将 "),s("code",[this._v("function foo(){ }();")]),this._v(" 解析成 "),s("code",[this._v("function foo(){ }")]),this._v(" 和 "),s("code",[this._v("();")]),this._v(" 。\n其中，前者是函数声明；后者（一对括号）是试图调用一个函数，却没有指定名称，因此它会抛出 Uncaught SyntaxError: Unexpected token ) 的错误。\n应做如下修改：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改1：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改2：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改3 ES6：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// With ES6 arrow functions (though parentheses only allowed on outside)")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考资料："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料："}},[this._v("#")]),this._v(" 参考资料：")])}],!1,null,null,null);s.default=e.exports}}]);