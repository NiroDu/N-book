<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>讲讲 Redux createStore 的实现原理 | N-book</title>
    <meta name="description" content="记录一些技术方面的文章">
    <link rel="icon" href="/n-book/logo.png">
  <link rel="manifest" href="/n-book/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/n-book/assets/css/0.styles.8647af70.css" as="style"><link rel="preload" href="/n-book/assets/js/app.00669d2d.js" as="script"><link rel="preload" href="/n-book/assets/js/24.9323b659.js" as="script"><link rel="prefetch" href="/n-book/assets/js/10.66c97b87.js"><link rel="prefetch" href="/n-book/assets/js/100.25cd6efd.js"><link rel="prefetch" href="/n-book/assets/js/11.d97ba4f9.js"><link rel="prefetch" href="/n-book/assets/js/12.8a7fa5f8.js"><link rel="prefetch" href="/n-book/assets/js/13.5c6c1dfb.js"><link rel="prefetch" href="/n-book/assets/js/14.c5caa02e.js"><link rel="prefetch" href="/n-book/assets/js/15.6bba582a.js"><link rel="prefetch" href="/n-book/assets/js/16.15881af1.js"><link rel="prefetch" href="/n-book/assets/js/17.58f3bf6d.js"><link rel="prefetch" href="/n-book/assets/js/18.41a59aa0.js"><link rel="prefetch" href="/n-book/assets/js/19.372839fc.js"><link rel="prefetch" href="/n-book/assets/js/20.366470b6.js"><link rel="prefetch" href="/n-book/assets/js/21.64ee41da.js"><link rel="prefetch" href="/n-book/assets/js/22.037051e6.js"><link rel="prefetch" href="/n-book/assets/js/23.aaf071e1.js"><link rel="prefetch" href="/n-book/assets/js/25.efd078a6.js"><link rel="prefetch" href="/n-book/assets/js/26.e088dd56.js"><link rel="prefetch" href="/n-book/assets/js/27.23686290.js"><link rel="prefetch" href="/n-book/assets/js/28.7561d341.js"><link rel="prefetch" href="/n-book/assets/js/29.c2bccad7.js"><link rel="prefetch" href="/n-book/assets/js/3.a2cc91fe.js"><link rel="prefetch" href="/n-book/assets/js/30.e41777e5.js"><link rel="prefetch" href="/n-book/assets/js/31.8fa8342a.js"><link rel="prefetch" href="/n-book/assets/js/32.4a720fec.js"><link rel="prefetch" href="/n-book/assets/js/33.f4bcb093.js"><link rel="prefetch" href="/n-book/assets/js/34.b319e6cc.js"><link rel="prefetch" href="/n-book/assets/js/35.349f48cb.js"><link rel="prefetch" href="/n-book/assets/js/36.40f0f5b8.js"><link rel="prefetch" href="/n-book/assets/js/37.d825f129.js"><link rel="prefetch" href="/n-book/assets/js/38.03ef6cd3.js"><link rel="prefetch" href="/n-book/assets/js/39.5616fe5e.js"><link rel="prefetch" href="/n-book/assets/js/4.5c88fff9.js"><link rel="prefetch" href="/n-book/assets/js/40.06b60369.js"><link rel="prefetch" href="/n-book/assets/js/41.c8f4431f.js"><link rel="prefetch" href="/n-book/assets/js/42.611e129f.js"><link rel="prefetch" href="/n-book/assets/js/43.090fb933.js"><link rel="prefetch" href="/n-book/assets/js/44.95113469.js"><link rel="prefetch" href="/n-book/assets/js/45.7fd92109.js"><link rel="prefetch" href="/n-book/assets/js/46.411b0cb5.js"><link rel="prefetch" href="/n-book/assets/js/47.c4ed96a6.js"><link rel="prefetch" href="/n-book/assets/js/48.363d6e9d.js"><link rel="prefetch" href="/n-book/assets/js/49.a6580a6f.js"><link rel="prefetch" href="/n-book/assets/js/5.7ed2b6ce.js"><link rel="prefetch" href="/n-book/assets/js/50.80fdc641.js"><link rel="prefetch" href="/n-book/assets/js/51.9fca5b30.js"><link rel="prefetch" href="/n-book/assets/js/52.7a12bef7.js"><link rel="prefetch" href="/n-book/assets/js/53.0a0223c1.js"><link rel="prefetch" href="/n-book/assets/js/54.f5e1f5f6.js"><link rel="prefetch" href="/n-book/assets/js/55.3942d1de.js"><link rel="prefetch" href="/n-book/assets/js/56.6edb51e4.js"><link rel="prefetch" href="/n-book/assets/js/57.ea4bffdf.js"><link rel="prefetch" href="/n-book/assets/js/58.e7e0ee95.js"><link rel="prefetch" href="/n-book/assets/js/59.4098f04a.js"><link rel="prefetch" href="/n-book/assets/js/6.b2aebbbe.js"><link rel="prefetch" href="/n-book/assets/js/60.db12ab5e.js"><link rel="prefetch" href="/n-book/assets/js/61.031fb8bd.js"><link rel="prefetch" href="/n-book/assets/js/62.329f47c4.js"><link rel="prefetch" href="/n-book/assets/js/63.b2f2abcc.js"><link rel="prefetch" href="/n-book/assets/js/64.dc588d61.js"><link rel="prefetch" href="/n-book/assets/js/65.d599496d.js"><link rel="prefetch" href="/n-book/assets/js/66.69417e8c.js"><link rel="prefetch" href="/n-book/assets/js/67.d93755f8.js"><link rel="prefetch" href="/n-book/assets/js/68.f25092ea.js"><link rel="prefetch" href="/n-book/assets/js/69.2de4fe7c.js"><link rel="prefetch" href="/n-book/assets/js/7.157f3540.js"><link rel="prefetch" href="/n-book/assets/js/70.282e9d03.js"><link rel="prefetch" href="/n-book/assets/js/71.504f689e.js"><link rel="prefetch" href="/n-book/assets/js/72.a2d94f4f.js"><link rel="prefetch" href="/n-book/assets/js/73.07c4c964.js"><link rel="prefetch" href="/n-book/assets/js/74.89c222e9.js"><link rel="prefetch" href="/n-book/assets/js/75.820bdfb7.js"><link rel="prefetch" href="/n-book/assets/js/76.2407d5c9.js"><link rel="prefetch" href="/n-book/assets/js/77.ec939a5f.js"><link rel="prefetch" href="/n-book/assets/js/78.07709c00.js"><link rel="prefetch" href="/n-book/assets/js/79.cc7a4faa.js"><link rel="prefetch" href="/n-book/assets/js/8.c2fc7b68.js"><link rel="prefetch" href="/n-book/assets/js/80.fd9ef1eb.js"><link rel="prefetch" href="/n-book/assets/js/81.df45910d.js"><link rel="prefetch" href="/n-book/assets/js/82.450bb3f2.js"><link rel="prefetch" href="/n-book/assets/js/83.32c188fc.js"><link rel="prefetch" href="/n-book/assets/js/84.294bd5d9.js"><link rel="prefetch" href="/n-book/assets/js/85.6de4096a.js"><link rel="prefetch" href="/n-book/assets/js/86.0954b5d1.js"><link rel="prefetch" href="/n-book/assets/js/87.e7762817.js"><link rel="prefetch" href="/n-book/assets/js/88.97035a60.js"><link rel="prefetch" href="/n-book/assets/js/89.53a151f5.js"><link rel="prefetch" href="/n-book/assets/js/9.e94df2f4.js"><link rel="prefetch" href="/n-book/assets/js/90.a6f97b09.js"><link rel="prefetch" href="/n-book/assets/js/91.22f24c28.js"><link rel="prefetch" href="/n-book/assets/js/92.75844e0d.js"><link rel="prefetch" href="/n-book/assets/js/93.d6922f54.js"><link rel="prefetch" href="/n-book/assets/js/94.3dd08f5f.js"><link rel="prefetch" href="/n-book/assets/js/95.6a4c80ba.js"><link rel="prefetch" href="/n-book/assets/js/96.c25099ac.js"><link rel="prefetch" href="/n-book/assets/js/97.1e5183d7.js"><link rel="prefetch" href="/n-book/assets/js/98.bbdf3f45.js"><link rel="prefetch" href="/n-book/assets/js/99.a020358d.js"><link rel="prefetch" href="/n-book/assets/js/vendors~docsearch.8bf892cf.js">
    <link rel="stylesheet" href="/n-book/assets/css/0.styles.8647af70.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/n-book/" class="home-link router-link-active"><!----> <span class="site-name">N-book</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/n-book/" class="nav-link">Home</a></div><div class="nav-item"><a href="/n-book/typescript/" class="nav-link">TypeScript</a></div><div class="nav-item"><a href="/n-book/python/" class="nav-link">Python</a></div><div class="nav-item"><a href="https://nirodu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/NiroDu/N-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/n-book/" class="nav-link">Home</a></div><div class="nav-item"><a href="/n-book/typescript/" class="nav-link">TypeScript</a></div><div class="nav-item"><a href="/n-book/python/" class="nav-link">Python</a></div><div class="nav-item"><a href="https://nirodu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/NiroDu/N-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span></span> <!----></p> <ul class="sidebar-group-items"><li><a href="/n-book/" class="sidebar-link">📖</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScripts专栏</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>React 专栏</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/n-book/react/react_basic.html" class="sidebar-link">React 基础部分</a></li><li><a href="/n-book/react/redux_basic.html" class="sidebar-link">Redux 基础部分</a></li><li><a href="/n-book/react/redux_intermediate.html" class="sidebar-link">Redux 中级部分</a></li><li><a href="/n-book/react/libs_with_react.html" class="sidebar-link">Libs with React</a></li><li><a href="/n-book/react/react_ssr.html" class="sidebar-link">从 0 实现 React SSR</a></li><li><a href="/n-book/react/redux_createstore.html" class="active sidebar-link">讲讲 Redux createStore 的实现原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/n-book/react/redux_createstore.html#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/n-book/react/redux_createstore.html#源码及分析" class="sidebar-link">源码及分析</a></li><li class="sidebar-sub-header"><a href="/n-book/react/redux_createstore.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/n-book/react/react_context.html" class="sidebar-link">React Context 怎么用</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Vue 专栏</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Webpack 专栏</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>TypeScript 专栏</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>自动化测试</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Interview 专栏</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="讲讲-redux-createstore-的实现原理"><a href="#讲讲-redux-createstore-的实现原理" class="header-anchor">#</a> 讲讲 Redux createStore 的实现原理</h1> <p><img src="/n-book/assets/img/createStore.428590eb.jpg" alt="createStore"></p> <p>createStore 创建一个 Redux store 来以存放应用中所有的 state，应用中应有且仅有一个 store。其中暴露 dispatch, subscribe, getState, replaceReducer 方法。</p> <h2 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h2> <p>先看看 createStore 是怎么个用法：</p> <p><code>createStore(reducer, [preloadedState], enhancer)</code></p> <p><strong>参数</strong></p> <p><code>reducer (Function)</code>: A reducing function that returns the next state tree, given the current state tree and an action to handle.(reducer 接收两个参数，分别是当前的 state 树和要处理的 action，返回新的 state 树。)</p> <p><code>[preloadedState] (any)</code>: The initial state. You may optionally specify it to hydrate the state from the server in universal apps, or to restore a previously serialized user session. If you produced reducer with combineReducers, this must be a plain object with the same shape as the keys passed to it. Otherwise, you are free to pass anything that your reducer can understand.(初始时的 state。在同构应用中，你可以决定是否把服务端传来的 state hydrate 后传给它，或者从之前保存的用户会话中恢复一个传给它。如果你使用 combineReducers 创建 reducer，它必须是一个普通对象，与传入的 keys 保持同样的结构。否则，你可以自由传入任何 reducer 可理解的内容。)</p> <p><code>[enhancer] (Function)</code>: The store enhancer. You may optionally specify it to enhance the store with third-party capabilities such as middleware, time travel, persistence, etc. The only store enhancer that ships with Redux is applyMiddleware().(store 的增强器函数，可以指定为第三方的中间件，时间旅行，持久化 等等，但是这个函数只能用 Redux 提供的 applyMiddleware 函数来生成；)</p> <p><strong>返回值</strong></p> <p>(Store): An object that holds the complete state of your app. The only way to change its state is by dispatching actions. You may also subscribe to the changes to its state to update the UI.(保存了所有 state 的对象。改变 state 的唯一方法是 dispatch action。你也可以 subscribe 监听 state 的变化，然后更新 UI。)</p> <p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 声明一个reducer</span>
<span class="token keyword">function</span> <span class="token function">todos</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;ADD_TODO&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>action<span class="token punctuation">.</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>todos<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;Use Redux&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&quot;ADD_TODO&quot;</span><span class="token punctuation">,</span>
  text<span class="token punctuation">:</span> <span class="token string">&quot;Read the docs&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ 'Use Redux', 'Read the docs' ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="源码及分析"><a href="#源码及分析" class="header-anchor">#</a> 源码及分析</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 大体框架</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> ActionTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">INIT</span><span class="token punctuation">:</span> <span class="token string">&quot;@@redux/INIT&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> preloadedState<span class="token punctuation">,</span> enhancer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//...初始条件的判断和设定</span>
  <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// getState方法的实现</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// subscribe方法的实现</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// dispatch方法的实现</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">replaceReducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// replaceReducer方法的实现</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// observable方法的实现</span>
    <span class="token comment">// (源码中关于observable的部分可以忽略，这个是redux内部使用的。我们在开发中几乎几乎用不到)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// store被创建后，自动分发一个'INIT' action。渲染出初始化的state树。</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> ActionTypes<span class="token punctuation">.</span><span class="token constant">INIT</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    dispatch<span class="token punctuation">,</span>
    subscribe<span class="token punctuation">,</span>
    getState<span class="token punctuation">,</span>
    replaceReducer
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><strong>完整源码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 首先定义了一个 ActionTypes 对象，它是一个 action，是一个 Redux 的私有 action，不允许外界触发，用来初始化 Store 的状态树和改变 reducers 后初始化 Store 的状态树。</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> ActionTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">INIT</span><span class="token punctuation">:</span> <span class="token string">&quot;@@redux/INIT&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 创建 store, 参数 reducer, state 以及中间件
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> preloadedState<span class="token punctuation">,</span> enhancer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在平常的使用中，我们一般会省略第二个参数。比如，当我们需要使用redux中间件的时候，就会像第三个参数传递一个applyMiddleware()[返回值是一个function]。</span>
  <span class="token comment">// 如果，我们没有初始状态，则会省略第二个参数。这个时候，我们的函数调用形式为：</span>
  <span class="token comment">// const store = createStore(reducer, applyMiddleware(...))</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> preloadedState <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> enhancer <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    enhancer <span class="token operator">=</span> preloadedState<span class="token punctuation">;</span>
    preloadedState <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// 如果我们指定了reducer增强器enhancer</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> enhancer <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// enhancer必须是一个函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> enhancer <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Expected the enhancer to be a function.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 这个函数接收createStore作为参数，并且返回一个函数，这个函数接收的参数是reducer,preloadedState</span>
    <span class="token comment">// 直接返回经过enhancer包装的对象</span>
    <span class="token keyword">return</span> <span class="token function">enhancer</span><span class="token punctuation">(</span>createStore<span class="token punctuation">)</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> preloadedState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  
  <span class="token comment">// 要求传递给createStore的第一个参数必须是一个函数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> reducer <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Expected the reducer to be a function.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// 保存初始的reducer</span>
  <span class="token keyword">let</span> currentReducer <span class="token operator">=</span> reducer
  <span class="token comment">// 保存初始的state</span>
  <span class="token keyword">let</span> currentState <span class="token operator">=</span> preloadedState
  <span class="token comment">// 保存所有的事件监听器</span>
  <span class="token keyword">let</span> currentListeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 获取当前监听器的一个副本(相同的引用)</span>
  <span class="token keyword">let</span> nextListeners <span class="token operator">=</span> currentListeners
  <span class="token comment">// 是否正在派发action</span>
  <span class="token keyword">let</span> isDispatching <span class="token operator">=</span> <span class="token boolean">false</span>

  <span class="token comment">// 这个函数可以根据当前监听函数的列表生成新的下一个监听函数列表引用</span>
  <span class="token comment">// 如果nextListeners和currentListeners具有相同的引用，则获取一份当前事件监听器集合的一个副本保存到nextListeners中</span>
  <span class="token keyword">function</span> <span class="token function">ensureCanMutateNextListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextListeners <span class="token operator">===</span> currentListeners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      nextListeners <span class="token operator">=</span> currentListeners<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 为什么要维护两份事件监听器列表(nextListeners,currentListeners)??</span>
  <span class="token comment">// 下面我们来解释</span>

  <span class="token comment">// 直接返回当前store的state</span>
  <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> currentState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 订阅事件，返回移除订阅函数</span>
  <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">listener</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 事件监听器必须是函数，否则会抛出异常</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> listener <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Expected listener to be a function.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 这个事件监听器是否已经被取消的标志</span>
    <span class="token keyword">let</span> isSubscribed <span class="token operator">=</span> <span class="token boolean">true</span>

    <span class="token comment">// 调用这个函数的结果就是生成一份当前事件监听器的一个副本保存到nextListeners中</span>
    <span class="token function">ensureCanMutateNextListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 将新的事件监听器添加到nextListeners中</span>
    nextListeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
    
    <span class="token comment">// 返回一个取消监听的函数</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果这个监听器已经被取消了，则直接return</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSubscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 将监听器是否取消的标志设置为false</span>
      isSubscribed <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token comment">// 再次生成一份事件监听器集合的副本</span>
      <span class="token function">ensureCanMutateNextListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 获取到需要取消的事件监听器的索引</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> nextListeners<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
      <span class="token comment">// 从事件监听器集合中删除这个事件监听器</span>
      nextListeners<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 从subscribe方法的源码中可以看出，每次在进行监听器的添加/删除之前，都会基于当前的监听器集合生成一个副本保存到nextListeners中。</span>
  <span class="token comment">// 下面我们继续看dispatch的源码:</span>

  <span class="token comment">// 执行 reducer，并触发订阅事件</span>
  <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// https://lodash.com/docs#isPlainObject</span>
    <span class="token comment">// dispatch的参数就是我们需要派发的action，一定要保证这个action是一个纯粹的对象</span>
    <span class="token comment">// 如果不是一个纯粹的对象，则会抛出异常。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Actions must be plain objects. &quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;Use custom middleware for async actions.&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 判断 action 是否有 type｛必须｝ 属性</span>
    <span class="token comment">// 派发的action必须有一个type属性(我们可以将这个属性认为就是action的身份证，这样redux才知道你派发的是哪个action，你需要做什么，该怎么为你做)</span>
    <span class="token comment">// 如果没有这个属性则会抛出异常</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
        <span class="token string">'Actions may not have an undefined &quot;type&quot; property. '</span> <span class="token operator">+</span>
          <span class="token string">&quot;Have you misspelled a constant?&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果正在 dispatch 则抛出错误</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isDispatching<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Reducers may not dispatch actions.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 对抛出 error 的兼容，但无论如何都会继续执行 isDispatching = false 的操作</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      isDispatching <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// 派发action</span>
      <span class="token comment">// 实质就是将当前的state和你需要派发的action传递给reducer函数并返回一个新的state</span>
      currentState <span class="token operator">=</span> <span class="token function">currentReducer</span><span class="token punctuation">(</span>currentState<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      isDispatching <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 又多了一份事件监听器的列表，简单的说一下这三份列表的作用</span>
    <span class="token comment">// nextListeners: 保存这次dispatch后，需要触发的所有事件监听器的列表</span>
    <span class="token comment">// currentListeners: 保存一份nextListeners列表的副本</span>
    <span class="token comment">// listeners: 需要执行的列表</span>
    <span class="token keyword">const</span> listeners <span class="token operator">=</span> currentListeners <span class="token operator">=</span> nextListeners
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> listeners<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> listener <span class="token operator">=</span> listeners<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token comment">// 调用所有的事件监听器</span>
      <span class="token function">listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//  dispatch的返回值也是十分重要的，如果没有这个返回值，就不可能引入强大的中间件机制。</span>
    <span class="token keyword">return</span> action<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 动态替换 reducer
   */</span>
  <span class="token keyword">function</span> <span class="token function">replaceReducer</span><span class="token punctuation">(</span><span class="token parameter">nextReducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> nextReducer <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Expected the nextReducer to be a function.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    currentReducer <span class="token operator">=</span> nextReducer<span class="token punctuation">;</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> ActionTypes<span class="token punctuation">.</span><span class="token constant">INIT</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> ActionTypes<span class="token punctuation">.</span><span class="token constant">INIT</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    dispatch<span class="token punctuation">,</span>
    subscribe<span class="token punctuation">,</span>
    getState<span class="token punctuation">,</span>
    replaceReducer
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br></div></div><h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p><a href="https://segmentfault.com/a/1190000011835213" target="_blank" rel="noopener noreferrer">redux 源码解读－－createStore 源码解析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/NiroDu/N-book/edit/master/docs/react/redux_createstore.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/19/2019, 12:35:48 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/n-book/react/react_ssr.html" class="prev">
          从 0 实现 React SSR
        </a></span> <span class="next"><a href="/n-book/react/react_context.html">
          React Context 怎么用
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/n-book/assets/js/app.00669d2d.js" defer></script><script src="/n-book/assets/js/24.9323b659.js" defer></script>
  </body>
</html>
